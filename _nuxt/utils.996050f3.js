import{v as p,m as C,D as x,Z as w,l as O,$ as k,j as A,a0 as E,a1 as S,a2 as B,P as D}from"./entry.13f4dc9c.js";import{u as R}from"./preview.10a65edc.js";const $=()=>null;function F(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);let[r,i,s={}]=e;if(typeof r!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");s.server=s.server??!0,s.default=s.default??$,s.lazy=s.lazy??!1,s.immediate=s.immediate??!0;const a=k(),n=()=>a.isHydrating?a.payload.data[r]:a.static.data[r],c=()=>n()!==void 0;a._asyncData[r]||(a._asyncData[r]={data:p(n()??s.default()),pending:p(!c()),error:C(a.payload._errors,r),status:p("idle")});const o={...a._asyncData[r]};o.refresh=o.execute=(f={})=>{if(a._asyncDataPromises[r]){if(f.dedupe===!1)return a._asyncDataPromises[r];a._asyncDataPromises[r].cancelled=!0}if((f._initial||a.isHydrating&&f._initial!==!1)&&c())return n();o.pending.value=!0,o.status.value="pending";const y=new Promise((u,d)=>{try{u(i(a))}catch(b){d(b)}}).then(u=>{if(y.cancelled)return a._asyncDataPromises[r];let d=u;s.transform&&(d=s.transform(u)),s.pick&&(d=j(d,s.pick)),o.data.value=d,o.error.value=null,o.status.value="success"}).catch(u=>{if(y.cancelled)return a._asyncDataPromises[r];o.error.value=u,o.data.value=A(s.default()),o.status.value="error"}).finally(()=>{y.cancelled||(o.pending.value=!1,a.payload.data[r]=o.data.value,o.error.value&&(a.payload._errors[r]=E(o.error.value)),delete a._asyncDataPromises[r])});return a._asyncDataPromises[r]=y,a._asyncDataPromises[r]};const m=()=>o.refresh({_initial:!0}),P=s.server!==!1&&a.payload.serverRendered;{const f=S();if(f&&!f._nuxtOnBeforeMountCbs){f._nuxtOnBeforeMountCbs=[];const u=f._nuxtOnBeforeMountCbs;f&&(x(()=>{u.forEach(d=>{d()}),u.splice(0,u.length)}),w(()=>u.splice(0,u.length)))}P&&a.isHydrating&&c()?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):f&&(a.payload.serverRendered&&a.isHydrating||s.lazy)&&s.immediate?f._nuxtOnBeforeMountCbs.push(m):s.immediate&&m(),s.watch&&O(s.watch,()=>o.refresh());const y=a.hook("app:data:refresh",u=>{if(!u||u.includes(r))return o.refresh()});f&&w(y)}const g=Promise.resolve(a._asyncDataPromises[r]).then(()=>o);return Object.assign(g,o),g}function j(e,t){const r={};for(const i of t)r[i]=e[i];return r}const v=(e,t)=>t.split(".").reduce((r,i)=>r&&r[i],e),h=(e,t)=>Object.keys(e).filter(t).reduce((r,i)=>Object.assign(r,{[i]:e[i]}),{}),K=e=>t=>e&&e.length?h(t,r=>!e.includes(r)):t,L=e=>t=>Array.isArray(t)?t.map(r=>e(r)):e(t),_=e=>{const t=[],r=[];for(const i of e)["$","_"].includes(i)?t.push(i):r.push(i);return{prefixes:t,properties:r}},T=(e=[])=>t=>{if(e.length===0||!t)return t;const{prefixes:r,properties:i}=_(e);return h(t,s=>!i.includes(s)&&!r.includes(s[0]))},U=(e=[])=>t=>{if(e.length===0||!t)return t;const{prefixes:r,properties:i}=_(e);return h(t,s=>i.includes(s)||r.includes(s[0]))},N=(e,t)=>{const r=new Intl.Collator(t.$locale,{numeric:t.$numeric,caseFirst:t.$caseFirst,sensitivity:t.$sensitivity}),i=Object.keys(t).filter(s=>!s.startsWith("$"));for(const s of i)e=e.sort((a,n)=>{const c=[v(a,s),v(n,s)].map(o=>{if(o!==null)return o instanceof Date?o.toISOString():o});return t[s]===-1&&c.reverse(),r.compare(c[0],c[1])});return e},Q=(e,t="Expected an array")=>{if(!Array.isArray(e))throw new TypeError(t)},l=e=>Array.isArray(e)?e:[void 0,null].includes(e)?[]:[e],I=["sort","where","only","without"];function G(e,t={}){const r={};for(const n of Object.keys(t.initialParams||{}))r[n]=I.includes(n)?l(t.initialParams[n]):t.initialParams[n];const i=(n,c=o=>o)=>(...o)=>(r[n]=c(...o),a),s=n=>{var c;return t.legacy?n!=null&&n.surround?n.surround:(n.dirConfig&&(n.result={_path:(c=n.dirConfig)==null?void 0:c._path,...n.result,_dir:n.dirConfig}),n!=null&&n._path||Array.isArray(n)||!Object.prototype.hasOwnProperty.call(n,"result")?n:n==null?void 0:n.result):n},a={params:()=>({...r,...r.where?{where:[...l(r.where)]}:{},...r.sort?{sort:[...l(r.sort)]}:{}}),only:i("only",l),without:i("without",l),where:i("where",n=>[...l(r.where),...l(n)]),sort:i("sort",n=>[...l(r.sort),...l(n)]),limit:i("limit",n=>parseInt(String(n),10)),skip:i("skip",n=>parseInt(String(n),10)),find:()=>e(a).then(s),findOne:()=>e(i("first")(!0)).then(s),count:()=>e(i("count")(!0)).then(s),locale:n=>a.where({_locale:n}),withSurround:i("surround",(n,c)=>({query:n,...c})),withDirConfig:()=>i("dirConfig")(!0)};return t.legacy&&(a.findSurround=(n,c)=>a.withSurround(n,c).findOne().then(s)),a}function M(e){return JSON.stringify(e,H)}function H(e,t){return t instanceof RegExp?`--REGEX ${t.toString()}`:t}const J=e=>{let t=M(e);return t=typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t),t=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),(t.match(/.{1,100}/g)||[]).join("/")},W=e=>B(e,D().public.content.api.baseURL),X=()=>{throw console.warn("useContent is only accessible when you are using `documentDriven` mode."),console.warn("Learn more by visiting: https://content.nuxtjs.org/guide/writing/document-driven"),new Error("useContent is only accessible when you are using `documentDriven` mode.")},Z=()=>{const{experimental:e}=D().public.content;return e.clientDB?!0:R().isEnabled()};export{F as a,Q as b,G as c,l as d,J as e,N as f,v as g,T as h,L as i,M as j,U as k,K as o,Z as s,X as u,W as w};
